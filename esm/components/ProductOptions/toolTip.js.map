{"version":3,"sources":["../../../src/components/ProductOptions/toolTip.js"],"names":["React","Component","shape","string","over","uuid","classify","defaultClasses","Tooltip","constructor","args","isShowing","timeoutId","setTimeout","setState","clearTimeout","event","key","uniqueId","render","text","children","classes","props","state","ariaEnhancedChildren","Children","map","child","type","ariaEnhancedButton","cloneElement","onBlur","onFocus","onKeyDown","onMouseOver","onMouseLeave","root","tooltip"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { shape, string } from 'prop-types';\nimport over from 'lodash.over';\nimport uuid from 'uuid/v4';\n\nimport classify from 'src/classify';\nimport defaultClasses from './toolTip.css';\n\n/**\n * NOTE: The Tooltip component, as created, needs to be a parent of the\n * component it is a tooltip for. This is necessary for several reasons:\n *  - the Tooltip generates a uuid which is used for the aria-describedby\n *  - the Tooltip currently acts like a controller for event handlers.\n *\n * Once we move this component to a more general \"Tooltip\" component within\n * Peregrine we may change the parent-child relationship pattern. Please be\n * aware of this if you chose to reuse this component. -srugh\n */\nclass Tooltip extends Component {\n    static propTypes = {\n        classes: shape({\n            root: string,\n            tooltip: string\n        }),\n        text: string\n    };\n\n    constructor(...args) {\n        super(...args);\n\n        this.timeoutId = null;\n        this.uniqueId = uuid();\n    }\n\n    state = {\n        isShowing: false\n    };\n\n    /*\n     *  Close the tooltip on the next tick.\n     *  Unfortunately this is necessary because another child of ours may have received focus\n     *  and this blur event is fired before that new focus event.\n     *  @see https://reactjs.org/docs/accessibility.html#mouse-and-pointer-events.\n     */\n    onBlur = () => {\n        this.timeoutId = setTimeout(() => {\n            this.setState({ isShowing: false });\n        }, 0);\n    };\n\n    /*\n     *  The tooltip target has received focus, show the tooltip.\n     */\n    onFocus = () => {\n        // If a child receives focus, do not close the tooltip yet.\n        clearTimeout(this.timeoutId);\n\n        this.setState({ isShowing: true });\n    };\n\n    onKeyDown = event => {\n        if (event.key === 'Escape') {\n            this.setState({ isShowing: false });\n        }\n    };\n    onMouseOver = () => {\n        this.setState({ isShowing: true });\n    };\n    onMouseLeave = () => {\n        this.setState({ isShowing: false });\n    };\n\n    render() {\n        const { text, children, classes } = this.props;\n        const { isShowing } = this.state;\n\n        const ariaEnhancedChildren = React.Children.map(children, child => {\n            if (child.type !== 'button') {\n                return child;\n            }\n\n            // The button triggers the tooltip.\n            // Update its accessibility accordingly.\n            const ariaEnhancedButton = React.cloneElement(child, {\n                'aria-describedby': this.uniqueId,\n                // We want to tack our event functionality onto whatever already exists.\n                // lodash.over returns a function that calls each function\n                // provided to it with the args it receives -\n                // in this case, a React SyntheticEvent.\n                onBlur: over([child.props.onBlur, this.onBlur]),\n                onFocus: over([child.props.onFocus, this.onFocus]),\n                onKeyDown: over([child.props.onKeyDown, this.onKeyDown]),\n                onMouseOver: over([child.props.onMouseOver, this.onMouseOver]),\n                onMouseLeave: over([\n                    child.props.onMouseLeave,\n                    this.onMouseLeave\n                ])\n            });\n\n            return ariaEnhancedButton;\n        });\n\n        return (\n            <div className={classes.root}>\n                {isShowing && (\n                    <div\n                        className={classes.tooltip}\n                        id={this.uniqueId}\n                        role=\"tooltip\"\n                    >\n                        {text}\n                    </div>\n                )}\n                {ariaEnhancedChildren}\n            </div>\n        );\n    }\n}\n\nexport default classify(defaultClasses)(Tooltip);\n"],"file":"toolTip.js"}